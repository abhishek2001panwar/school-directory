(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{5041:function(e,s,r){Promise.resolve().then(r.bind(r,9738))},9738:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return AddSchool}});var l=r(7437),a=r(2265),t=r(1865),o=r(2160),i=r(8110),n=r(5925),c=r(1396),d=r.n(c);function Nav(){return(0,l.jsx)("nav",{className:"w-full border-b bg-white",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between p-4",children:[(0,l.jsx)(d(),{href:"/",className:"font-bold",children:"School Directory"}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(d(),{className:"underline",href:"/addSchool",children:"Add School"}),(0,l.jsx)(d(),{className:"underline",href:"/showSchools",children:"Show Schools"})]})]})})}let m=o.Ry({name:o.Z_().min(2,"Name must be at least 2 characters"),address:o.Z_().min(5,"Address must be at least 5 characters"),city:o.Z_().min(2,"City must be at least 2 characters"),state:o.Z_().min(2,"State must be at least 2 characters"),contact:o.Z_().min(7,"Contact must be at least 7 characters"),email_id:o.Z_().email("Invalid email"),image:o.Yj().refine(e=>(null==e?void 0:e.length)===1,"Image is required")});function AddSchool(){let[e,s]=(0,a.useState)(!1),{register:r,handleSubmit:o,formState:{errors:c},reset:d}=(0,t.cI)({resolver:(0,i.F)(m)}),onSubmit=async e=>{s(!0);try{let s=new FormData;Object.entries(e).forEach(e=>{let[r,l]=e;"image"===r?s.append("image",l[0]):s.append(r,l)});let r=await fetch("/api/schools",{method:"POST",body:s}),l=await r.json();if(!r.ok)throw Error(l.error||"Failed to save school");n.ZP.success("School added successfully!"),d()}catch(e){n.ZP.error("Error: "+e.message)}finally{s(!1)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Nav,{}),(0,l.jsxs)("main",{className:"max-w-lg mx-auto p-6 mt-8",children:[(0,l.jsx)(n.x7,{position:"top-right"}),(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center text-blue-700",children:"Add School"}),(0,l.jsxs)("form",{onSubmit:o(onSubmit),className:"space-y-5",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"School Name",...r("name")}),c.name&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-1",children:c.name.message})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Address",...r("address")}),c.address&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-1",children:c.address.message})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"City",...r("city")}),c.city&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-1",children:c.city.message})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"State",...r("state")}),c.state&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-1",children:c.state.message})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Contact Number",...r("contact")}),c.contact&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-1",children:c.contact.message})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",type:"email",placeholder:"Email ID",...r("email_id")}),c.email_id&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-1",children:c.email_id.message})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"block text-gray-600 mb-2",children:"School Image"}),(0,l.jsx)("input",{className:"w-full text-gray-700 border border-gray-300 rounded-lg p-2 bg-gray-50 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",type:"file",accept:"image/*",...r("image")}),c.image&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-1 ml-1",children:String(c.image.message)})]}),(0,l.jsx)("button",{type:"submit",disabled:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 shadow-md mt-4 disabled:opacity-70",children:e?"Saving...":"Add School"})]})]})]})}}},function(e){e.O(0,[326,142,971,472,744],function(){return e(e.s=5041)}),_N_E=e.O()}]);