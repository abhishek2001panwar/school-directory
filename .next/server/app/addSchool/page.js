(()=>{var e={};e.id=377,e.ids=[377],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},6803:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var t=r(7096),a=r(6132),o=r(7284),l=r.n(o),n=r(2564),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(s,i);let d=["",{children:["addSchool",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2029)),"C:\\Users\\Lenovo\\Downloads\\school-directory\\src\\app\\addSchool\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9113)),"C:\\Users\\Lenovo\\Downloads\\school-directory\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Lenovo\\Downloads\\school-directory\\src\\app\\addSchool\\page.tsx"],m="/addSchool/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/addSchool/page",pathname:"/addSchool",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3211:(e,s,r)=>{Promise.resolve().then(r.bind(r,4385))},4385:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>AddSchool});var t=r(784),a=r(9885),o=r(6558),l=r(5830),n=r(3894),i=r(345),d=r(1440),c=r.n(d);function Nav(){return t.jsx("nav",{className:"w-full border-b bg-white",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between p-4",children:[t.jsx(c(),{href:"/",className:"font-bold",children:"School Directory"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx(c(),{className:"underline",href:"/addSchool",children:"Add School"}),t.jsx(c(),{className:"underline",href:"/showSchools",children:"Show Schools"})]})]})})}let m=l.Ry({name:l.Z_().min(2,"Name must be at least 2 characters"),address:l.Z_().min(5,"Address must be at least 5 characters"),city:l.Z_().min(2,"City must be at least 2 characters"),state:l.Z_().min(2,"State must be at least 2 characters"),contact:l.Z_().min(7,"Contact must be at least 7 characters"),email_id:l.Z_().email("Invalid email"),image:l.Yj().refine(e=>e?.length===1,"Image is required")});function AddSchool(){let[e,s]=(0,a.useState)(!1),{register:r,handleSubmit:l,formState:{errors:d},reset:c}=(0,o.cI)({resolver:(0,n.F)(m)}),onSubmit=async e=>{s(!0);try{let s=new FormData;Object.entries(e).forEach(([e,r])=>{"image"===e?s.append("image",r[0]):s.append(e,r)});let r=await fetch("/api/schools",{method:"POST",body:s}),t=await r.json();if(!r.ok)throw Error(t.error||"Failed to save school");i.ZP.success("School added successfully!"),c()}catch(e){i.ZP.error("Error: "+e.message)}finally{s(!1)}};return(0,t.jsxs)(t.Fragment,{children:[t.jsx(Nav,{}),(0,t.jsxs)("main",{className:"max-w-lg mx-auto p-6 mt-8",children:[t.jsx(i.x7,{position:"top-right"}),t.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-blue-700",children:"Add School"}),(0,t.jsxs)("form",{onSubmit:l(onSubmit),className:"space-y-5",children:[(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"School Name",...r("name")}),d.name&&t.jsx("p",{className:"text-red-500 text-sm mt-1 ml-1",children:d.name.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Address",...r("address")}),d.address&&t.jsx("p",{className:"text-red-500 text-sm mt-1 ml-1",children:d.address.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"City",...r("city")}),d.city&&t.jsx("p",{className:"text-red-500 text-sm mt-1 ml-1",children:d.city.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"State",...r("state")}),d.state&&t.jsx("p",{className:"text-red-500 text-sm mt-1 ml-1",children:d.state.message})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Contact Number",...r("contact")}),d.contact&&t.jsx("p",{className:"text-red-500 text-sm mt-1 ml-1",children:d.contact.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("input",{className:"border border-gray-300 p-3 w-full rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",type:"email",placeholder:"Email ID",...r("email_id")}),d.email_id&&t.jsx("p",{className:"text-red-500 text-sm mt-1 ml-1",children:d.email_id.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{className:"block text-gray-600 mb-2",children:"School Image"}),t.jsx("input",{className:"w-full text-gray-700 border border-gray-300 rounded-lg p-2 bg-gray-50 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",type:"file",accept:"image/*",...r("image")}),d.image&&t.jsx("p",{className:"text-red-500 text-sm mt-1 ml-1",children:String(d.image.message)})]}),t.jsx("button",{type:"submit",disabled:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 shadow-md mt-4 disabled:opacity-70",children:e?"Saving...":"Add School"})]})]})]})}},2029:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>o,default:()=>i});var t=r(5153);let a=(0,t.createProxy)(String.raw`C:\Users\Lenovo\Downloads\school-directory\src\app\addSchool\page.tsx`),{__esModule:o,$$typeof:l}=a,n=a.default,i=n}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[472,614,831,796],()=>__webpack_exec__(6803));module.exports=r})();